<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Quick R Tutorial" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This book covers the essentials for using R." />


<meta name="author" content="Frank Erickson" />

<meta name="date" content="2016-08-20" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

<meta name="description" content="This book covers the essentials for using R.">

<title>Quick R Tutorial</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="index.html#getting-started-with-r"><span class="toc-section-number">1.1</span> Getting started with R</a></li>
<li><a href="index.html#about-this-book"><span class="toc-section-number">1.2</span> About this book</a></li>
</ul></li>
<li class="has-sub"><a href="basics.html#basics"><span class="toc-section-number">2</span> Basics</a><ul>
<li class="has-sub"><a href="basics.html#vectors"><span class="toc-section-number">2.1</span> Vectors</a><ul>
<li><a href="basics.html#documentation"><span class="toc-section-number">2.1.1</span> Documentation</a></li>
<li><a href="basics.html#classes"><span class="toc-section-number">2.1.2</span> Classes</a></li>
<li><a href="basics.html#str"><span class="toc-section-number">2.1.3</span> Inspecting objects</a></li>
<li><a href="basics.html#names"><span class="toc-section-number">2.1.4</span> Named elements</a></li>
<li><a href="basics.html#na"><span class="toc-section-number">2.1.5</span> Missing values</a></li>
<li><a href="basics.html#slicing"><span class="toc-section-number">2.1.6</span> Slicing to a subvector</a></li>
<li><a href="basics.html#extracting-from-a-list"><span class="toc-section-number">2.1.7</span> Extracting from a list</a></li>
<li><a href="basics.html#subassigning"><span class="toc-section-number">2.1.8</span> Assigning to a subvector</a></li>
<li><a href="basics.html#initializing"><span class="toc-section-number">2.1.9</span> Initializing</a></li>
<li><a href="basics.html#factors"><span class="toc-section-number">2.1.10</span> Factors</a></li>
<li><a href="basics.html#sorting-rank-order"><span class="toc-section-number">2.1.11</span> Sorting, rank, order</a></li>
<li><a href="basics.html#exercises"><span class="toc-section-number">2.1.12</span> Exercises</a></li>
</ul></li>
<li class="has-sub"><a href="basics.html#matrices-and-arrays"><span class="toc-section-number">2.2</span> Matrices and Arrays</a><ul>
<li><a href="basics.html#named-rows-and-columns"><span class="toc-section-number">2.2.1</span> Named rows and columns</a></li>
<li><a href="basics.html#slicing-to-a-submatrix"><span class="toc-section-number">2.2.2</span> Slicing to a submatrix</a></li>
<li><a href="basics.html#extracting-from-matrices"><span class="toc-section-number">2.2.3</span> Extracting from matrices</a></li>
<li><a href="basics.html#subassigning-to-matrices"><span class="toc-section-number">2.2.4</span> Subassigning to matrices</a></li>
<li><a href="basics.html#arrays"><span class="toc-section-number">2.2.5</span> Arrays</a></li>
</ul></li>
<li class="has-sub"><a href="basics.html#syntax"><span class="toc-section-number">2.3</span> Syntax</a><ul>
<li><a href="basics.html#assigning-to-attributes"><span class="toc-section-number">2.3.1</span> Assigning to attributes</a></li>
<li><a href="basics.html#arithmetic"><span class="toc-section-number">2.3.2</span> Arithmetic</a></li>
<li><a href="basics.html#logical-operators"><span class="toc-section-number">2.3.3</span> Logical operators</a></li>
<li><a href="basics.html#matrix-algebra"><span class="toc-section-number">2.3.4</span> Matrix algebra</a></li>
<li><a href="basics.html#order-of-operations"><span class="toc-section-number">2.3.5</span> Order of operations</a></li>
<li><a href="basics.html#elementwise-operations-and-code-vectorization"><span class="toc-section-number">2.3.6</span> Elementwise operations and “code vectorization”</a></li>
<li><a href="basics.html#function-arguments"><span class="toc-section-number">2.3.7</span> Function arguments</a></li>
</ul></li>
<li class="has-sub"><a href="basics.html#functions"><span class="toc-section-number">2.4</span> Functions</a><ul>
<li><a href="basics.html#structure-and-documentation"><span class="toc-section-number">2.4.1</span> Structure and documentation</a></li>
<li><a href="basics.html#finding-function-source-code"><span class="toc-section-number">2.4.2</span> Finding function source code</a></li>
<li><a href="basics.html#writing-functions"><span class="toc-section-number">2.4.3</span> Writing functions</a></li>
<li><a href="basics.html#custom-operators"><span class="toc-section-number">2.4.4</span> Custom operators</a></li>
<li><a href="basics.html#loading-community-made-functions"><span class="toc-section-number">2.4.5</span> Loading community-made functions</a></li>
</ul></li>
<li><a href="basics.html#loops"><span class="toc-section-number">2.5</span> Loops and Control Flow</a></li>
<li><a href="basics.html#data-frames"><span class="toc-section-number">2.6</span> Data frames</a></li>
</ul></li>
<li class="has-sub"><a href="quirks.html#quirks"><span class="toc-section-number">3</span> Quirks</a><ul>
<li><a href="quirks.html#randomization"><span class="toc-section-number">3.1</span> Randomization</a></li>
<li><a href="quirks.html#time-series-operators"><span class="toc-section-number">3.2</span> Time series operators</a></li>
<li><a href="quirks.html#functions-methods"><span class="toc-section-number">3.3</span> Functions’ methods</a></li>
<li><a href="quirks.html#sequences"><span class="toc-section-number">3.4</span> Sequences</a></li>
<li><a href="quirks.html#tallying"><span class="toc-section-number">3.5</span> Tallying</a></li>
<li><a href="quirks.html#finding-bins-for-values"><span class="toc-section-number">3.6</span> Finding bins for values</a></li>
<li><a href="quirks.html#finding-where-a-condition-holds"><span class="toc-section-number">3.7</span> Finding where a condition holds</a></li>
<li><a href="quirks.html#finding-a-value"><span class="toc-section-number">3.8</span> Finding a value</a></li>
<li><a href="quirks.html#string-operations"><span class="toc-section-number">3.9</span> String operations</a></li>
<li><a href="quirks.html#built-in-constants"><span class="toc-section-number">3.10</span> Built-in constants</a></li>
<li><a href="quirks.html#set-ops"><span class="toc-section-number">3.11</span> Set operators</a></li>
<li><a href="quirks.html#working-with-lists-and-data-frames"><span class="toc-section-number">3.12</span> Working with lists and data frames</a></li>
<li><a href="quirks.html#runs"><span class="toc-section-number">3.13</span> Runs</a></li>
<li><a href="quirks.html#lapply"><span class="toc-section-number">3.14</span> Iterating over lists</a></li>
<li><a href="quirks.html#using-grouping-variables"><span class="toc-section-number">3.15</span> Using grouping variables</a></li>
<li><a href="quirks.html#chains-of-functions"><span class="toc-section-number">3.16</span> Chains of functions</a></li>
<li><a href="quirks.html#asking-questions-online"><span class="toc-section-number">3.17</span> Asking questions online</a></li>
</ul></li>
<li class="has-sub"><a href="work.html#work"><span class="toc-section-number">4</span> Getting work done in R</a><ul>
<li class="has-sub"><a href="work.html#data-table"><span class="toc-section-number">4.1</span> data.table</a><ul>
<li><a href="work.html#dt-cols"><span class="toc-section-number">4.1.1</span> Creating and modifying columns</a></li>
<li><a href="work.html#dt-sub"><span class="toc-section-number">4.1.2</span> Subsetting and subassignment</a></li>
<li><a href="work.html#dt-set-ops"><span class="toc-section-number">4.1.3</span> set operations</a></li>
<li><a href="work.html#dt-grouping"><span class="toc-section-number">4.1.4</span> Operations by group</a></li>
<li><a href="work.html#dt-groupvars"><span class="toc-section-number">4.1.5</span> Creating grouping variables</a></li>
<li><a href="work.html#dt-merging"><span class="toc-section-number">4.1.6</span> Merges and merge-assigns</a></li>
</ul></li>
<li class="has-sub"><a href="work.html#structuring-data"><span class="toc-section-number">4.2</span> Structuring data</a><ul>
<li><a href="work.html#dates-times"><span class="toc-section-number">4.2.1</span> Dates and times</a></li>
</ul></li>
<li><a href="work.html#exploring-data"><span class="toc-section-number">4.3</span> Exploring data</a></li>
<li><a href="work.html#input-output"><span class="toc-section-number">4.4</span> Reading, converting and writing data</a></li>
<li><a href="work.html#approximation-optimization-and-regression"><span class="toc-section-number">4.5</span> Approximation, optimization and regression</a></li>
</ul></li>
<li class="has-sub"><a href="advanced.html#advanced"><span class="toc-section-number">5</span> Miscellaneous</a><ul>
<li><a href="advanced.html#output-tables-and-graphs"><span class="toc-section-number">5.1</span> Output tables and graphs</a></li>
<li><a href="advanced.html#style"><span class="toc-section-number">5.2</span> Style</a></li>
<li class="has-sub"><a href="advanced.html#programming"><span class="toc-section-number">5.3</span> Program structure</a><ul>
<li><a href="advanced.html#reused-code"><span class="toc-section-number">5.3.1</span> Reused code</a></li>
<li><a href="advanced.html#shortcuts"><span class="toc-section-number">5.3.2</span> Shortcuts</a></li>
<li><a href="advanced.html#mapping-values"><span class="toc-section-number">5.3.3</span> Mapping values</a></li>
<li><a href="advanced.html#formula-interface"><span class="toc-section-number">5.3.4</span> The formula interface</a></li>
<li><a href="advanced.html#reproducible-research"><span class="toc-section-number">5.3.5</span> Reproducible research</a></li>
</ul></li>
<li class="has-sub"><a href="advanced.html#advanced-tools"><span class="toc-section-number">5.4</span> Advanced tools</a><ul>
<li><a href="advanced.html#profiling"><span class="toc-section-number">5.4.1</span> Profiling</a></li>
<li><a href="advanced.html#rcpp"><span class="toc-section-number">5.4.2</span> Rcpp</a></li>
<li><a href="advanced.html#combinatorial-problems"><span class="toc-section-number">5.4.3</span> Combinatorial problems</a></li>
<li><a href="advanced.html#rolling-operations"><span class="toc-section-number">5.4.4</span> Rolling operations</a></li>
<li><a href="advanced.html#parallelization"><span class="toc-section-number">5.4.5</span> Parallelization</a></li>
<li><a href="advanced.html#intervals"><span class="toc-section-number">5.4.6</span> Intervals</a></li>
<li><a href="advanced.html#graph-theory"><span class="toc-section-number">5.4.7</span> Graph theory</a></li>
<li><a href="advanced.html#dynamic-programming"><span class="toc-section-number">5.4.8</span> Dynamic programming</a></li>
<li><a href="advanced.html#working-with-files-on-disk"><span class="toc-section-number">5.4.9</span> Working with files on disk</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="basics" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Basics</h1>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">2.1</span> Vectors</h2>
<p>In R, all data come in vectors. If you type <code>x = 54.7</code>, then <code>x</code> will be a numeric vector of length 1. Similarly, <code>y = c(&quot;Yah&quot;, &quot;Bada bing&quot;)</code> is a character vector of length 2. You can type a vector’s name to see it, and use <code>length</code> and <code>class</code> to see those attributes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example data</span>
x =<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code># [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code># [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code># [1] &quot;logical&quot;</code></pre>
<p>The bracketed <code>[1]</code> indicates that we are seeing the first element of a vector. This printing pattern is handy with vectors too long for a single line – try looking at <code>x = 1:500</code>.</p>
<p>You can assign with <code>=</code> or <code>&lt;-</code>. You can even assign like <code>c(2,3) -&gt; z</code>, but this is rare and hard to read in my opinion. If an existing vector is overwritten, no warning is given.</p>
<div id="documentation" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Documentation</h3>
<p>Everything is documented in convenient wikified html pages, accessible with <code>?</code> or <code>help</code>. For example, <code>?TRUE</code> or <code>?length</code>. Backticks are sometimes required, as for <code>?`(`</code> and <code>?`?`</code>. Keep a close eye on the Description and Value sections, which concisely explain what to expect from a function. Manuals and additional reference documents can be found by typing <code>help.start()</code>.</p>
<p>R doesn’t do error codes, only error messages and warnings. If you don’t understand a message you’re seeing, a search online or a review of the relevant docs is usually sufficient.</p>
</div>
<div id="classes" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Classes</h3>
<p>Every vanilla vector has a class. That is, every element of the vector contains the same type of data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">4</span>, <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</code></pre></div>
<pre><code># [1] &quot;4&quot; &quot;A&quot; &quot;B&quot;</code></pre>
<p><span id="coercion" class="spnote"> <strong>Coercion.</strong> The <code>4</code> is “coerced” to <code>character</code> above, with no warning given. Since coercion is so central to R and confusing for new users, I strongly suggest reading its documentation, in the Details section of <code>?c</code>. </span></p>
<p>The doc at <code>?c</code> also conveniently lists all of the vanilla (“atomic”) classes. The key ones are <code>logical</code>, <code>integer</code>, <code>numeric</code> and <code>character</code>. A <code>list</code> is a special type of vector whose elements can be arbitrary objects, for example, a list of vectors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example data</span>
L  =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;A&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))
L2 =<span class="st"> </span><span class="kw">list</span>(<span class="ot">FALSE</span>)
L3 =<span class="st"> </span><span class="kw">c</span>(L, L2)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L3</code></pre></div>
<pre><code># [[1]]
# [1] &quot;A&quot;
# 
# [[2]]
# [1] 1 2
# 
# [[3]]
# [1] FALSE</code></pre>
<p>The <code>[[1]]</code> printed here indicates the first element of the list, similar to the <code>[1]</code> we see for atomic vectors.</p>
<p><span id="classes_detail" class="spdetails"> <strong>Fancier classes</strong> are generally built on top of atomic classes or lists. Behind the scenes, date formats are numeric or integer; while complex objects like data sets and regression results are lists. For details on storage modes, see <code>?typeof</code> and the <a href="https://cran.r-project.org/doc/manuals/r-release/R-ints.html">R internals</a> documentation. While some fancy data structures like linked lists and unordered sets are absent in base R, they can be used through packages like Rcpp. </span></p>
<p>For lists, in addition to a <code>length</code> attribute, we also have <code>lengths</code> for each element:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L3</code></pre></div>
<pre><code># [[1]]
# [1] &quot;A&quot;
# 
# [[2]]
# [1] 1 2
# 
# [[3]]
# [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lengths</span>(L3)</code></pre></div>
<pre><code># [1] 1 2 1</code></pre>
</div>
<div id="str" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Inspecting objects</h3>
<p>For complicated objects, like <code>L3</code> above, <code>class(L3)</code> is not very informative. Examining the “structure” of the object is usually more useful:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(L3)</code></pre></div>
<pre><code># List of 3
#  $ : chr &quot;A&quot;
#  $ : num [1:2] 1 2
#  $ : logi FALSE</code></pre>
<p>To really get in the weeds, you can use <code>typeof</code>, which says how the object referred to is stored, but this is rarely useful.</p>
<p>We will see later (TODO) that we have better specialized tools for inspecting data.tables.</p>
</div>
<div id="names" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Named elements</h3>
<p>A vector’s elements can be named:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code># a b 
# 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="dt">A =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">B =</span> <span class="dv">4</span>)</code></pre></div>
<pre><code># $A
# [1] 1 2
# 
# $B
# [1] 4</code></pre>
<p>The names of an objects’ elements can be accessed with the <code>names</code> function.</p>
<p><span id="argument-names" class="spnote"> <strong>Passing arguments.</strong> Inside <code>c(A = 1)</code>, the equals sign is not interchangeable with the <code>&lt;-</code>, so don’t write <code>c(A &lt;- 1)</code>. Think of <code>c</code> as a function with syntax like <code>c(argname = argvalue, argname2 = argvalue2, ...)</code>. The equals sign has the special role of giving names to the function’s arguments. </span></p>
</div>
<div id="na" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Missing values</h3>
<p>R differs from other programming languages in its careful treatment of missing values in the reading and processing of data. The missing-data code <code>NA</code> is distinct from other special codes:</p>
<ul>
<li>a non-number, <code>NaN</code>;</li>
<li>positive and negative infinity, <code>Inf</code> and <code>-Inf</code>; and</li>
<li>the absence of an object, <code>NULL</code>.</li>
</ul>
<p>For details, read the “Missing values” section of the “An Introduction to R,” a manual reachable by typing <code>help.start()</code> and clicking a link.</p>
<p><span id="na-classes" class="spnote"> <strong>Implementation of missing values.</strong> The class of an <code>NA</code> is different depending on the vector it is in. Sometimes, it is important to ensure that a missing value belongs to a particular class. To ensure this, the safest approach is to “slice” an object of that class with <code>NA_integer_</code>. For example, to get a missing numeric value, you can use the number <code>10</code> like <code>10[NA_integer_]</code>; or for a date value, we can use the current date, <code>Sys.Date()</code>, like <code>Sys.Date()[NA_integer_]</code>. </span></p>
</div>
<div id="slicing" class="section level3">
<h3><span class="header-section-number">2.1.6</span> Slicing to a subvector</h3>
<p>Select a subvector of <code>x</code> like <code>x[i]</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example data</span>
x =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)
L =<span class="st"> </span><span class="kw">list</span>(<span class="dt">X =</span> <span class="dv">1</span>, <span class="dt">Y =</span> <span class="dv">2</span>, <span class="dt">Z =</span> <span class="dv">3</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code># [1] &quot;a&quot; &quot;c&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[-<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code># [1] &quot;a&quot; &quot;d&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L[<span class="kw">c</span>(<span class="st">&quot;Y&quot;</span>,<span class="st">&quot;Z&quot;</span>)]</code></pre></div>
<pre><code># $Y
# [1] 2
# 
# $Z
# [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</code></pre></div>
<pre><code># [1] &quot;b&quot; &quot;c&quot;</code></pre>
<p>So, the index <code>i</code> can be…</p>
<ul>
<li>a vector of positions to include;</li>
<li>a negated vector of positions to exclude;</li>
<li>a vector of element names; or</li>
<li>a TRUE/FALSE vector, with a selection rule for each position.</li>
</ul>
<p><code>i</code> can even contain repeated elements, like <code>x[c(1,1,2)]</code>, which is some more general “slice” of <code>x</code>, not really a subvector.</p>
<p><span id="recycling" class="spnote"> <strong>Recycling.</strong> What would you expect <code>x[TRUE]</code> to do in the example above? Well, in R, it is treated like <code>x[c(TRUE, TRUE, TRUE, TRUE)]</code>, without giving any warning. This is called recycling – the argument <code>i</code> is repeated until it is long enough for the context is used in. Can you guess what <code>x[c(TRUE, FALSE)]</code> does? The full rules for recycling can be found in the <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#The-recycling-rule">R intro doc</a>. </span></p>
<p>There are a few edge cases worth noting. As mentioned in <a href="basics.html#na">2.1.5</a>, it can be useful to set <code>i</code> as <code>NA_integer_</code> to find the “missing value version of <code>x</code>.” Similarly, we can set <code>i</code> to <code>0L</code> to find the “empty version of <code>x</code>.” Setting <code>i</code> to include positions or names outside of range will just yield missing values and is usually not useful.</p>
</div>
<div id="extracting-from-a-list" class="section level3">
<h3><span class="header-section-number">2.1.7</span> Extracting from a list</h3>
<p>Grab a single element of a vector like <code>x[[i]]</code>, where <code>i</code> is a single name or number:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example data</span>
L =<span class="st"> </span><span class="kw">list</span>(<span class="dt">X =</span> <span class="dv">1</span>, <span class="dt">Y =</span> <span class="dv">2</span>, <span class="dt">Z =</span> <span class="dv">3</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L[<span class="st">&quot;Z&quot;</span>] <span class="co"># slicing</span></code></pre></div>
<pre><code># $Z
# [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L[[<span class="st">&quot;Z&quot;</span>]] <span class="co"># extracting</span></code></pre></div>
<pre><code># [1] 3</code></pre>
<p>In the example above, the slice <code>L[&quot;Z&quot;]</code> is a list containing just one element; while <code>L[[&quot;Z&quot;]]</code> <em>actually is the element</em>.</p>
<p><code>L$Z</code> offers a handy alternative way of extracting by name from a list, but it is tougher to write a program around.</p>
</div>
<div id="subassigning" class="section level3">
<h3><span class="header-section-number">2.1.8</span> Assigning to a subvector</h3>
<p>Assign to a subvector, or “subassign,” like <code>x[i] = y</code> or <code>x[i] &lt;- y</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example data</span>
x =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)
L =<span class="st"> </span><span class="kw">list</span>(<span class="dt">X =</span> <span class="dv">1</span>, <span class="dt">Y =</span> <span class="dv">2</span>, <span class="dt">Z =</span> <span class="dv">3</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;bada&quot;</span>, <span class="st">&quot;bing&quot;</span>)
L[<span class="kw">c</span>(<span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Z&quot;</span>)] =<span class="st"> </span><span class="kw">list</span>(<span class="dv">21</span>, <span class="dv">31</span>)</code></pre></div>
<p>The allowed values of <code>i</code> are the same as we saw for slicing a vector in <a href="basics.html#slicing">2.1.6</a>. It is fairly unsafe on account of silent coercion, recycling and failure (when <code>i</code> is not a valid index of <code>x</code>). We will revisit how to modify vectors after introducing data.tables in <a href="work.html#data-table">4.1</a>.</p>
<p><span id="hidden-docs" class="spnote"> <strong>Hard-to-find documentation.</strong> For documentation on slicing and extracting, you can type <code>?`[`</code>. Even though there is a <code>]</code> for every <code>[</code>, it is the opening bracket that is the function’s actual name, which will come back in <a href="quirks.html#lapply">3.14</a>. For documentation on sub-assignment, type <code>?`[&lt;-`</code>. </span></p>
<p>One can similarly assign to a single element of a list with <code>x[[i]] &lt;- y</code>. If an existing element is overwritten, no warning is given.</p>
</div>
<div id="initializing" class="section level3">
<h3><span class="header-section-number">2.1.9</span> Initializing</h3>
<p>In R, it bad practice to dynamically grow objects, like <code>x = 1</code>, <code>x = c(x,2)</code>, …, <code>x = c(x,n)</code>. Instead, create the vector with its final length first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">vector</span>(<span class="dt">length =</span> <span class="dv">5</span>, <span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>)
x =<span class="st"> </span><span class="kw">character</span>(<span class="dt">length =</span> <span class="dv">5</span>)
x =<span class="st"> </span><span class="kw">logical</span>(<span class="dt">length =</span> <span class="dv">5</span>)
x =<span class="st"> </span><span class="kw">numeric</span>(<span class="dt">length =</span> <span class="dv">5</span>)
x =<span class="st"> </span><span class="kw">integer</span>(<span class="dt">length =</span> <span class="dv">5</span>)</code></pre></div>
<p>From there, you can subassign iteratively if necessary.</p>
<p>It’s also common to initialize a vector with a particular value using <code>rep</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">3</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code>#  [1] 3 3 3 3 3 3 3 3 3 3</code></pre>
<p><code>rep(x, n)</code> extends nicely to the case where <code>x</code> is a vector. It does this in a few different configurations, as documented at <code>?rep</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="dv">5</span>)</code></pre></div>
<pre><code>#  [1] 3 4 3 4 3 4 3 4 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">each =</span> <span class="dv">5</span>)</code></pre></div>
<pre><code>#  [1] 3 3 3 3 3 4 4 4 4 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">length.out =</span> <span class="dv">5</span>)</code></pre></div>
<pre><code># [1] 3 4 3 4 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</code></pre></div>
<pre><code># [1] 3 3 3 4 4 4 4</code></pre>
</div>
<div id="factors" class="section level3">
<h3><span class="header-section-number">2.1.10</span> Factors</h3>
<p>As with missing values, a lot of thought was put into the treatment of categorical data in R, captured by the <code>factor</code> data type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;New York&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>, <span class="st">&quot;Mumbai&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>))</code></pre></div>
<pre><code># [1] New York Tokyo    Mumbai   Tokyo   
# Levels: Mumbai New York Tokyo</code></pre>
<p>Here, the factor is being constructed from a character vector, but usually our data is already a factor when it is read into R (since that is the default interpretation assigned to strings found in raw input data).</p>
<p>Factors usually have no sense of ordering (like “Tokyo” naturally coming before “Bombay”), but one can be added if appropriate:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Worst&quot;</span>, <span class="st">&quot;Best&quot;</span>, <span class="st">&quot;Not Bad&quot;</span>, <span class="st">&quot;Worst&quot;</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Worst&quot;</span>, <span class="st">&quot;Not Bad&quot;</span>, <span class="st">&quot;Best&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code># [1] Worst   Best    Not Bad Worst  
# Levels: Worst &lt; Not Bad &lt; Best</code></pre>
<p>To see whether a factor has an order, use <code>is.ordered</code>. Details on manipulating factors can be found at <code>?factor</code> and linked pages.</p>
</div>
<div id="sorting-rank-order" class="section level3">
<h3><span class="header-section-number">2.1.11</span> Sorting, rank, order</h3>
<p>There are three key functions here:</p>
<ul>
<li><code>sort(x)</code> will sort the vector.</li>
<li><code>rank(x)</code> tells how far forward each element of <code>x</code> is in its pecking order.</li>
<li><code>order(x)</code> is rarely useful on its own, but <code>y[order(x)]</code> will sort <code>y</code> by <code>x</code>.</li>
</ul>
<p>Be careful not to use these functions on an unordered factor, where they will make no sense but run without warning.</p>
<p>The <code>frank()</code> function (yes, really) from the data.table package is also useful, for its “dense” rank tie-breaking rule.</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">2.1.12</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What is the class of <code>c(TRUE, 1)</code>?</li>
<li>What is the length of <code>list(1, c(2,3))</code>?</li>
<li>If I run <code>x = c(&quot;a&quot;,&quot;b&quot;)</code> and then <code>x[c(2,1)] = c(&quot;c&quot;,&quot;d&quot;)</code>, what is the value of <code>x[1]</code>?</li>
<li>Write the command to summon documenation for for the assignment procedure used in <code>L$X &lt;- list(3)</code>?</li>
</ol>
</div>
</div>
<div id="matrices-and-arrays" class="section level2">
<h2><span class="header-section-number">2.2</span> Matrices and Arrays</h2>
<p>The <code>matrix</code> function is used for construction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)
<span class="kw">matrix</span>(v, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>#      [,1] [,2]
# [1,]    1    3
# [2,]    2    4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(v, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>#      [,1] [,2]
# [1,]    1    2
# [2,]    3    4</code></pre>
<p>Recycling applies here again. Try <code>matrix(v, nrow = 4, ncol = 4)</code>. If we just want <code>v</code> to fill out the matrix once, it is not necessary to give both <code>nrow</code> and <code>ncol</code>, like <code>matrix(v, nrow = 2)</code>. If the dimensions don’t make sense for the input vector, <code>matrix(v, nrow = 3)</code>, R will mercifully throw a warning.</p>
<p>All elements of a matrix must have the same class, just like a vector. In fact, a matrix <em>is</em> a vector, just augmented by an attribute capturing its dimensions, accessible with the <code>dim</code> function.</p>
<div id="named-rows-and-columns" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Named rows and columns</h3>
<p>Rows and columns can be named:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;c&quot;</span>,<span class="st">&quot;d&quot;</span>)))</code></pre></div>
<pre><code>#   c d
# a 1 3
# b 2 4</code></pre>
</div>
<div id="slicing-to-a-submatrix" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Slicing to a submatrix</h3>
<p>To take a matrix slice, selecting a submatrix, use <code>m[i,j]</code> as in math:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>)
m[<span class="dv">1</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), drop =<span class="st"> </span><span class="ot">FALSE</span>]</code></pre></div>
<pre><code>#      [,1] [,2]
# [1,]    1    3</code></pre>
<p>You can get fancy with indices, in all the ways described in <a href="basics.html#slicing">2.1.6</a>. It is often covenient to leave one index blank, which means “select all rows/columns”; try <code>m[, 2, drop = FALSE]</code>.</p>
<p><span id="drop" class="spcaution"> <strong>Dropped dimensions.</strong> The <code>drop = FALSE</code> option is necessary to ensure that the result is a submatrix. R’s default behavior is to “drop” dimensions when it can, which makes for unpredictable output. </span></p>
</div>
<div id="extracting-from-matrices" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Extracting from matrices</h3>
<p>Since matrices <em>are</em> vectors, we can extract a vector of values in the same way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m[<span class="dv">3</span>]</code></pre></div>
<pre><code># [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</code></pre></div>
<pre><code># [1] 2 3</code></pre>
<p>Matrices also allow extraction like <code>X[Y]</code>, where <code>Y</code> is a two column “index matrix”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">im =<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>), <span class="dv">2</span>, <span class="dv">2</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)
m[im]</code></pre></div>
<pre><code># [1] 1 4</code></pre>
<p>The first column corresponds to rows, and the second to columns.</p>
</div>
<div id="subassigning-to-matrices" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Subassigning to matrices</h3>
<p>Assign to elements of a matrix in one of a few ways:</p>
<ul>
<li><code>x[i,j] = z</code> where <code>i</code> and <code>j</code> are rows and columns, respectively</li>
<li><code>x[i] = z</code> with <code>i</code> being an index vector</li>
<li><code>X[Y] = z</code> with <code>Y</code> being an index matrix</li>
</ul>
<p>In all cases, <code>z</code> is a vector or matrix of values.</p>
</div>
<div id="arrays" class="section level3">
<h3><span class="header-section-number">2.2.5</span> Arrays</h3>
<p>Arrays are the same as matrices, just in higher dimensions. For example, a three-dimensional array will have a <code>dim</code> attribute of length three and have slicing syntax like <code>a[i,j,k]</code>.</p>
</div>
</div>
<div id="syntax" class="section level2">
<h2><span class="header-section-number">2.3</span> Syntax</h2>
<div id="assigning-to-attributes" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Assigning to attributes</h3>
<p>There are convenience functions for modifying object attributes, with syntax like <code>names(x) &lt;- y</code> or <code>names(x) = y</code>. A few are for…</p>
<ul>
<li>vector element names, <code>?`names&lt;-`</code></li>
<li>vector class, <code>?`class&lt;-`</code></li>
<li>vector length, <code>?`length&lt;-`</code></li>
<li>matrix or array dimensions, <code>?`dim&lt;-`</code></li>
<li>matrix or array names, <code>?`dimnames&lt;-`</code></li>
</ul>
<p>These are rarely needed and can be confusing for obvious reasons.</p>
</div>
<div id="arithmetic" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Arithmetic</h3>
<p>The full set of arithmetic operators is documented at <code>?Arithmetic</code>. The integer division and modulo operators look like <code>%/%</code> and <code>%%</code>, but otherwise, everything is standard.</p>
<p>Other basic functions include <code>round</code>, <code>floor</code>, <code>ceiling</code>, <code>min</code>, <code>max</code>, <code>log</code>, <code>exp</code>, <code>sqrt</code>.</p>
<p>As in <a href="http://floating-point-gui.de/">any other programming environment</a>, floating point arithmetic in R can trip up calculations. For example, try <code>.1 + .05 - .15 == 0</code>.</p>
<p><span id="arithmetic-bools" class="spnote"> <strong>Arithmetic with logical values.</strong> Particularly when exploring data, we often want to tally observations meeting some condition. To do this in R, we can treat true/false like 1/0: <code>is_gt = c(1,5,2) &gt; c(1,2,3); sum(is_gt)</code>. Fancier tallying methods are covered in <a href="quirks.html#tallying">3.5</a> and <a href="work.html#exploring-data">4.3</a>.</span></p>
</div>
<div id="logical-operators" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Logical operators</h3>
<p><span id="logical-nums" class="spnote"> <strong>Logical operations with numeric values.</strong> Particularly when exploring data, we often want to tally observations meeting some condition. To do this in R, we can treat true/false like 1/0: <code>is_gt = c(1,5,2) &gt; c(1,2,3); sum(is_gt)</code>.</span></p>
</div>
<div id="matrix-algebra" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Matrix algebra</h3>
<p>note – infix operators also need backticks to find their help pages, also can be written as prefix</p>
<p>matrix operators: %/%, t, %*% recall that vanilla mult is elementwise, silently recycles</p>
</div>
<div id="order-of-operations" class="section level3">
<h3><span class="header-section-number">2.3.5</span> Order of operations</h3>
<p>The order of operations is listed in <code>?Syntax</code>. In addition to the operators listed, <code>**</code> is an alias for <code>^</code>. The <code>%any%</code> listed there refers to a broad class of “infix” or binary operators: <code>%/%</code> and <code>%%</code> for integer division and modulo; and <code>%*%</code> for matrix multiplication; and any custom infix operators defined by the user, covered more in .</p>
</div>
<div id="elementwise-operations-and-code-vectorization" class="section level3">
<h3><span class="header-section-number">2.3.6</span> Elementwise operations and “code vectorization”</h3>
<p>Most operations in R are performed elementwise:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)
y =<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)
x /<span class="st"> </span>y</code></pre></div>
<pre><code># [1] 0.5000000 0.6666667</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x ^<span class="st"> </span>y</code></pre></div>
<pre><code># [1] 1 8</code></pre>
<p>We call functions with this behavior “vectorized.” R is a lot faster when operations are performed elementwise rather than in a loop, so there’s a common mantra to “vectorize your code,” especially when doing arithmetic. The idea is similar to translating a statistical model into matrix algebra.</p>
<p><span id="recycling-again" class="spnote"> <strong>Recycling, again.</strong> As we saw in <a href="basics.html#slicing">2.1.6</a>, recycling kicks for any vectorized function. So we have <code>c(-2,2) ^ c(1,2,3,4)</code> working, with no warning given. Fortunately, there is a warning if the recycling is imperfect, like <code>c(-2,2) ^ c(1,2,3)</code>.</span></p>
<p>A couple of notably non-vectorized functions are <code>&amp;&amp;</code> and <code>||</code>. These will (silently) only look at the first element on each side; and if the result can be determined using the left-hand side, for example in <code>FALSE &amp;&amp; x</code>, then the right-hand side will not be evaluated. These are useful mostly for improving efficiency on the margins.</p>
</div>
<div id="function-arguments" class="section level3">
<h3><span class="header-section-number">2.3.7</span> Function arguments</h3>
<p>Compare the documentation <code>?vector</code> against my usage in <a href="basics.html#initializing">2.1.9</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">vector</span>(<span class="dt">length =</span> <span class="dv">5</span>, <span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>)</code></pre></div>
<p>I passed the arguments out-of-order. This is safe so long as you name every argument. Passing arguments by the position, like <code>sort(x, TRUE)</code>, is a riskier proposition, since it is harder to get right initially and to interpret correctly later.</p>
</div>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">2.4</span> Functions</h2>
<div id="structure-and-documentation" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Structure and documentation</h3>
<p>Functions in R all map input to output. In the documentation for a function, the input is covered in the “Arguments” section, while the output is in the “Value” section.</p>
</div>
<div id="finding-function-source-code" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Finding function source code</h3>
<p>getAnywhere()</p>
<p>also point to “methods” sec and mention C</p>
</div>
<div id="writing-functions" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Writing functions</h3>
<p>Like any other object, functions can be given names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f =<span class="st"> </span>function(x) x</code></pre></div>
<div id="scoping" class="section level4">
<h4><span class="header-section-number">2.4.3.1</span> Scoping</h4>
<p>Some functions in base R are primarily useful for their “side effects,” like <code>?rm</code> and <code>?`[&lt;-`</code>, and in <a href="work.html#data-table">4.1</a>, we will look at the data.table package, which is designed around modifying objects “in-place.” As a normal user, however, there is almost never a good reason to write a function with side effects. So, I suggest ignoring <code>?`&lt;&lt;-`</code> and <code>?assign</code>.</p>
</div>
<div id="lazy-evaluation" class="section level4">
<h4><span class="header-section-number">2.4.3.2</span> Lazy evaluation</h4>
<p>R is very lax about using globals</p>
</div>
</div>
<div id="custom-operators" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Custom operators</h3>
</div>
<div id="loading-community-made-functions" class="section level3">
<h3><span class="header-section-number">2.4.5</span> Loading community-made functions</h3>
<div id="exploring-packages" class="section level4">
<h4><span class="header-section-number">2.4.5.1</span> Exploring packages</h4>
<p>R has a variety of packages specialized by task and area of research. The <a href="https://cran.r-project.org/web/views/">Task Views</a> on the web are a good way to browse available packages on CRAN, the Comprehensive R Archive Network.</p>
<p>Besides adding additional functions, many packages add new classes, for example for time series data.</p>
</div>
<div id="installing-packages" class="section level4">
<h4><span class="header-section-number">2.4.5.2</span> Installing packages</h4>
<p>It is best to install packages from CRAN, rather than elsewhere. Packages submitted to CRAN (i) have to pass some vetting procedures defined by the developers of R and and (ii) are typically used much more broadly than those not on CRAN, improving exposure of bugs.</p>
<p>To install a package from CRAN, use <code>install.packages('package_name')</code>. The first time this is run during an R session, a popup will prompt for which mirror to download from. For further options, read <code>?install.packages</code>.</p>
</div>
<div id="using-functions-from-packages" class="section level4">
<h4><span class="header-section-number">2.4.5.3</span> Using functions from packages</h4>
<p>?pkgname::fn</p>
<p>library(pkgname)</p>
<p><a href="https://www.datacamp.com/community/tutorials/functions-in-r-a-tutorial" class="uri">https://www.datacamp.com/community/tutorials/functions-in-r-a-tutorial</a></p>
</div>
<div id="finding-where-a-function-came-from" class="section level4">
<h4><span class="header-section-number">2.4.5.4</span> Finding where a function came from</h4>
<p>??</p>
<p>findAnywhere</p>
</div>
</div>
</div>
<div id="loops" class="section level2">
<h2><span class="header-section-number">2.5</span> Loops and Control Flow</h2>
<p>As in most programming languages, we have <code>for</code> loops, <code>if</code>/<code>else</code> blocks, and so on. Some quirks to note:</p>
<ul>
<li>Write <code>for (x in idx) ...</code> to iterate over the vector <code>idx</code>, even its duplicates.</li>
<li>Write <code>if else</code>, since there is no <code>ifelse</code>.</li>
<li>Use <code>next</code> to bust out of the current iteration of a loop.</li>
<li>Use <code>break</code> to bust out of the loop entirely.</li>
</ul>
<p>Newlines and <code>{}</code> are optional in some cases.</p>
<p>ex: create an empty matrix and fill it, row by row</p>
<p>but, if the steps don’t really need to be sequential, don’t loop</p>
<p>maybe you have a closed-form solution for each row</p>
<p>maybe each row is entirely independent</p>
<p>often, the answer is arithmetic or matrix algebra</p>
<p>for more complicated tasks, use replicate/lapply/sapply (all documented in the same place)</p>
<p>excruciating detail <a href="https://www.datacamp.com/community/tutorials/tutorial-on-loops-in-r" class="uri">https://www.datacamp.com/community/tutorials/tutorial-on-loops-in-r</a></p>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">2.6</span> Data frames</h2>
<p>recall that in matrices, all elements are of the same class/type</p>
<p>with data sets, we have mixed types</p>
<p>in R, data frames are the container for general data sets</p>
<p>they are implemented as lists of vectors, where each vector has the same length</p>
<p>basic data exploration: View(), table + useNA, summary</p>
<p>rules for extracting are a mess. we’ll see data.table soon</p>
<p>note – use the right tool for the job. if the work you’re doing is in linear algebra, use a matrix. many simulations are also best handle with matrices and arrays, rather than data frames. data frames are only for mixed classes of data.</p>

</div>
</div>
<p style="text-align: center;">
<a href="index.html"><button class="btn btn-default">Previous</button></a>
<a href="quirks.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
