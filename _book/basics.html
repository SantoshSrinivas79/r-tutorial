<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Quick R Tutorial" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This book covers the essentials for using R." />


<meta name="author" content="Frank Erickson" />

<meta name="date" content="2016-04-01" />


<meta name="description" content="This book covers the essentials for using R.">

<title>Quick R Tutorial</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link rel="stylesheet" href="toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="index.html#getting-started-with-r"><span class="toc-section-number">1.1</span> Getting started with R</a></li>
<li><a href="index.html#about-this-book"><span class="toc-section-number">1.2</span> About this book</a></li>
</ul></li>
<li class="has-sub"><a href="basics.html#basics"><span class="toc-section-number">2</span> Basics</a><ul>
<li class="has-sub"><a href="basics.html#vectors"><span class="toc-section-number">2.1</span> Vectors</a><ul>
<li><a href="basics.html#documentation"><span class="toc-section-number">2.1.1</span> Documentation</a></li>
<li><a href="basics.html#classes"><span class="toc-section-number">2.1.2</span> Classes</a></li>
<li><a href="basics.html#named-elements"><span class="toc-section-number">2.1.3</span> Named elements</a></li>
<li><a href="basics.html#missing-values"><span class="toc-section-number">2.1.4</span> Missing values</a></li>
<li><a href="basics.html#slicing"><span class="toc-section-number">2.1.5</span> Slicing</a></li>
<li><a href="basics.html#extracting"><span class="toc-section-number">2.1.6</span> Extracting</a></li>
<li><a href="basics.html#initializing-and-subassigning"><span class="toc-section-number">2.1.7</span> Initializing and subassigning</a></li>
<li><a href="basics.html#sorting"><span class="toc-section-number">2.1.8</span> Sorting</a></li>
<li><a href="basics.html#exercises"><span class="toc-section-number">2.1.9</span> Exercises</a></li>
</ul></li>
<li><a href="basics.html#syntax"><span class="toc-section-number">2.2</span> Syntax</a></li>
<li><a href="basics.html#writing-and-importing-functions"><span class="toc-section-number">2.3</span> Writing and importing functions</a></li>
<li><a href="basics.html#matrices-and-arrays"><span class="toc-section-number">2.4</span> Matrices and Arrays</a></li>
<li><a href="basics.html#randomization"><span class="toc-section-number">2.5</span> Randomization</a></li>
<li><a href="basics.html#loops"><span class="toc-section-number">2.6</span> Loops and Control Flow</a></li>
<li><a href="basics.html#data-frames"><span class="toc-section-number">2.7</span> Data frames</a></li>
</ul></li>
<li class="has-sub"><a href="quirks.html#quirks"><span class="toc-section-number">3</span> Quirks</a><ul>
<li><a href="quirks.html#tallying"><span class="toc-section-number">3.1</span> Tallying</a></li>
<li><a href="quirks.html#finding-a-value-or-interval"><span class="toc-section-number">3.2</span> Finding a value or interval</a></li>
<li><a href="quirks.html#set-operations"><span class="toc-section-number">3.3</span> Set operations</a></li>
<li><a href="quirks.html#runs-and-sequences"><span class="toc-section-number">3.4</span> Runs and sequences</a></li>
<li><a href="quirks.html#lapply"><span class="toc-section-number">3.5</span> <code id="lapply">lapply</code></a></li>
</ul></li>
<li class="has-sub"><a href="work.html#work"><span class="toc-section-number">4</span> Getting work done in R</a><ul>
<li><a href="work.html#data.table"><span class="toc-section-number">4.1</span> data.table</a></li>
<li><a href="work.html#structuring-data"><span class="toc-section-number">4.2</span> Structuring data</a></li>
<li><a href="work.html#exploring-data"><span class="toc-section-number">4.3</span> Exploring data</a></li>
<li><a href="work.html#reading-converting-and-writing-data"><span class="toc-section-number">4.4</span> Reading, converting and writing data</a></li>
<li><a href="work.html#approximation-optimization-and-regression"><span class="toc-section-number">4.5</span> Approximation, optimization and regression</a></li>
</ul></li>
<li class="has-sub"><a href="advanced.html#advanced"><span class="toc-section-number">5</span> Advanced tools</a><ul>
<li><a href="advanced.html#output-tables-and-graphs"><span class="toc-section-number">5.1</span> Output tables and graphs</a></li>
<li><a href="advanced.html#program-structure"><span class="toc-section-number">5.2</span> Program structure</a></li>
<li><a href="advanced.html#rcpp"><span class="toc-section-number">5.3</span> Rcpp</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="basics" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Basics</h1>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">2.1</span> Vectors</h2>
<p>In R, all data come in vectors. If you type <code>x = 54.7</code>, then <code>x</code> will be a numeric vector of length 1. Similarly, <code>y = c(&quot;Abc&quot;, &quot;xY_z&quot;)</code> is a character vector of length 2. After assigning a vector, you can type its name to see it and use <code>length</code> and <code>class</code> to see those attributes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code># [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code># [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code># [1] &quot;logical&quot;</code></pre>
<p>The bracketed <code>[1]</code> indicates that we are seeing the first element of a vector. This printing pattern is handy with vectors too long for a single line. You can assign with <code>=</code> or <code>&lt;-</code>. You can even assign like <code>c(2,3) -&gt; z</code>, but this is rare and hard to read in my opinion.</p>
<div id="documentation" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Documentation</h3>
<p>Everything in the base installation of R is documented in convenient wikified html pages. These can be accessed with <code>?</code> or <code>help</code>. For example, <code>?TRUE</code> or <code>?length</code>. Backticks are sometimes required, as for <code>?`(`</code> and <code>?`?`</code>. Keep a close eye on the Description and Value sections, which concisely explain what to expect from a function.</p>
</div>
<div id="classes" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Classes</h3>
<p>All elements of a vanilla vector must have the same class, so</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">4</span>, <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</code></pre></div>
<pre><code># [1] &quot;4&quot; &quot;A&quot; &quot;B&quot;</code></pre>
<p><span id="coercion" class="spnote"> <strong>Coercion.</strong> The <code>4</code> is “coerced” to <code>character</code>, with no warning given. </span></p>
<p>This behavior is explained in the Details section of <code>?c</code>, which also conveniently lists all of the vanilla (“atomic”) classes. The key ones are <code>logical</code>, <code>integer</code>, <code>numeric</code> and <code>character</code>. A <code>list</code> is a special type of vector whose elements can be arbitrary objects. For example, we can have a list of vectors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L  =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;A&quot;</span>, <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))
L2 =<span class="st"> </span><span class="kw">list</span>(<span class="ot">FALSE</span>)
<span class="kw">c</span>(L, L2)</code></pre></div>
<pre><code># [[1]]
# [1] &quot;A&quot;
# 
# [[2]]
# [1] 1 2
# 
# [[3]]
# [1] FALSE</code></pre>
<p><span id="classes_detail" class="spdetails"> Fancier classes are generally built on top of atomic classes or lists. Behind the scenes, date formats are numeric or integer; while complex objects like data sets and regression results are lists. For details on storage modes, see <code>?typeof</code> and the <a href="https://cran.r-project.org/doc/manuals/r-release/R-ints.html">R internals</a> documentation. While some fancy data structures like linked lists and unordered sets are absent in base R, they can be used through packages like Rcpp. </span></p>
</div>
<div id="named-elements" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Named elements</h3>
<p>A vector’s elements can be named:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code># a b 
# 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="dt">A =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">B =</span> <span class="dv">4</span>)</code></pre></div>
<pre><code># $A
# [1] 1 2
# 
# $B
# [1] 4</code></pre>
<p><span id="arguments" class="spnote"> <strong>Passing arguments.</strong> In <code>c(A = 1)</code>, the equals sign is not interchangeable with the <code>&lt;-</code>, so you should not write <code>c(A &lt;- 1)</code>. Think of <code>c</code> as a function with syntax like <code>c(argname = argvalue, argname2 = argvalue2, ...)</code>. The equals sign just plays the special role of giving names to the function’s arguments. </span></p>
<p>Names are more useful for lists than vanilla vectors, where they are usually unnecessary and quickly get messy. For example, try <code>c(1, X = c(a = 2, b = 3, 4))</code> or <code>c(A = 1, A = 1)</code>.</p>
</div>
<div id="missing-values" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Missing values</h3>
<p>R distinguishes itself from other programming languages by its careful treatment of missing values. See <code>?NA</code>. As explained there, the missing-data code <code>NA</code> is to be distinguished from a non-number, <code>NaN</code>, and from the absence of an object, <code>NULL</code>, for example in <code>list(A = 1, B = NULL)</code>.</p>
</div>
<div id="slicing" class="section level3">
<h3><span class="header-section-number">2.1.5</span> Slicing</h3>
<p>We can select a subvector of <code>x</code> like <code>x[i]</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)
L =<span class="st"> </span><span class="kw">list</span>(<span class="dt">X =</span> <span class="dv">1</span>, <span class="dt">Y =</span> <span class="dv">2</span>, <span class="dt">Z =</span> <span class="dv">3</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code># [1] &quot;a&quot; &quot;c&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[-<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code># [1] &quot;a&quot; &quot;d&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">L[<span class="kw">c</span>(<span class="st">&quot;Y&quot;</span>,<span class="st">&quot;Z&quot;</span>)]</code></pre></div>
<pre><code># $Y
# [1] 2
# 
# $Z
# [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</code></pre></div>
<pre><code># [1] &quot;b&quot; &quot;c&quot;</code></pre>
<p>So, the index <code>i</code> can be a vector of positions to include; a negated vector of positions to exclude; a vector of element names; or a TRUE/FALSE vector, with a selection rule for each position.</p>
<p><code>x[i]</code> notation can also be pushed beyond subsetting, by passing repeated values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>)]</code></pre></div>
<pre><code># [1] &quot;a&quot; &quot;c&quot; &quot;c&quot; &quot;b&quot;</code></pre>
<p>By the way, no one else calls this “slicing”; so sue me.</p>
<p><span id="recycling" class="spnote"> <strong>Recycling.</strong> What would you expect <code>x[TRUE]</code> to do in the example above? Well, in R, it is treated like <code>x[c(TRUE, TRUE, TRUE, TRUE)]</code>. This is called recycling – the argument <code>i</code> is repeated until it is long enough for the context. While this behavior is usually convenient, it is worthwhile to grok what, for example, what <code>x[c(TRUE, FALSE)]</code> is doing. </span></p>
<p>Because recycling is so central to R, no warnings are given when it happens. Along with coercion <a href="basics.html#classes">2.1.2</a> – like <code>c(4, c(&quot;A&quot;, &quot;B&quot;))</code> – this is one of the most confusing features for a new R user.</p>
</div>
<div id="extracting" class="section level3">
<h3><span class="header-section-number">2.1.6</span> Extracting</h3>
<p><span id="bracket-docs" class="spdetails"> For documentation on slicing and extracting, you can type <code>?`[[`</code>. Brackets come in pairs but are just named after their opener. This naming pattern will come up again later in <a href="quirks.html#lapply">3.5</a> when working with lists of lists. </span></p>
<p><code>$</code> is another way</p>
</div>
<div id="initializing-and-subassigning" class="section level3">
<h3><span class="header-section-number">2.1.7</span> Initializing and subassigning</h3>
<p>In R, it bad practice to dynamically grow objects, like <code>x = 1</code>, <code>x = c(x,2)</code>, …, <code>x = c(x,n)</code>. Instead, preallocate with <code>vector</code> or a related function and assign:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">vector</span>(<span class="dv">5</span>, <span class="dt">mode =</span> <span class="st">&quot;list&quot;</span>)
y =<span class="st"> </span><span class="kw">logical</span>(<span class="dv">5</span>)</code></pre></div>
<p>note – MATLAB-style multiple assignment is not possible, but you can do</p>
<p>L[c(2,3)] &lt;- list(y, z)</p>
<p>beware recycling here again</p>
<p>You can coerce <code>x</code> to a higher class through assignment, like <code>x[1] &lt;- &quot;a&quot;</code>, but this is generally a bad idea.</p>
<p>As with “slicing,” no one calls this “subassigning,” but they should.</p>
<p>generally, you don’t want to get too fancy with subassignment. we’ll see a nicer way to do it with @ref(data.table), covering most practical applications.</p>
</div>
<div id="sorting" class="section level3">
<h3><span class="header-section-number">2.1.8</span> Sorting</h3>
<p>factors, ordered factors</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">2.1.9</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What is the class of <code>c(TRUE, 1L)</code>?</li>
</ol>
</div>
</div>
<div id="syntax" class="section level2">
<h2><span class="header-section-number">2.2</span> Syntax</h2>
<p>floating point issues are real. For example, .1 + .05 - .15 is not necessarily zero <a href="http://stackoverflow.com/questions/9508518/why-are-these-numbers-not-equal">so post</a></p>
<p>note – infix operators also need backticks to find their help pages</p>
<p>vectorization</p>
</div>
<div id="writing-and-importing-functions" class="section level2">
<h2><span class="header-section-number">2.3</span> Writing and importing functions</h2>
<p>custom infix operators</p>
</div>
<div id="matrices-and-arrays" class="section level2">
<h2><span class="header-section-number">2.4</span> Matrices and Arrays</h2>
<p>Technical aside: The terminology is a bit weird here. In most programming languages, an <em>array</em> is a vector</p>
<div class="rmdcaution">
<p>
regarding drop
</p>
</div>
<p>note – because an array is just a trussed up vector, [[ extraction works, but is rarely useful</p>
</div>
<div id="randomization" class="section level2">
<h2><span class="header-section-number">2.5</span> Randomization</h2>
</div>
<div id="loops" class="section level2">
<h2><span class="header-section-number">2.6</span> Loops and Control Flow</h2>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">2.7</span> Data frames</h2>
<p>rules for extracting are a mess. we’ll see data.table soon</p>
<p>note – use the right tool for the job. if the work you’re doing is in linear algebra, use a matrix. many simulations are also best handle with matrices and arrays, rather than data frames. data frames are only for mixed classes of data.</p>

</div>
</div>
<p style="text-align: center;">
<a href="index.html"><button class="btn btn-default">Previous</button></a>
<a href="quirks.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
