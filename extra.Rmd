# Miscellaneous {#extra}

This chapter is a WIP, a dumping location for things I am not putting a priority on covering, mostly because I don't know them well enough.

For now, it's not part of the book (determined by bookdown.yml).

## Platform independence

don't use `shell` (only available on Windows); instead use `system`

some features must vary by OS, `is_win = Sys.info()['sysname'] == "Windows"`

- on linux, capitalization matters; while on win, there are extra extensions, so rscript.exe vs Rscript

- some R functions hand work off to the OS, like `sprintf`. this is dangerous but hard to avoid. for example, this broke my ITime columns on linux

i haven't yet managed an "open file" command in linux. in win, it's "cmd.exe file" ... probably in linux, it's just "file", but i haven't tested yet... i don't really know where it grabs file associations from, nor even what in-console text editors it has...

## Program structure and style

never ever do DT <- DT[...], makes the code impossible to maintain, and it's not like you need to economise on RAM or something


clearly separate data processing from analysis, to the point where you could easily split them into two separate scripts in a few minutes if needed

similarly, separate analysis from generation of output tables and graphs

similarly, separate run parameters related to each stage into groups in the preamble

define dirs at the top of the file and always refer to them by var name, not raw path

never use T and F as shortcuts to TRUE and FALSE. in economics, F is a CDF and T is the number of periods; and i'm sure other fields have similar conventions

don't do the crazy bracket/paren indenting advocated by RStudio, Google, et al, except maybe in function definition. trust `args(function_name)` to print that bit that way if you really care

### Calling in batch

i prefer that my scripts work both interactively and via batch

also, i prefer that as many args as possible be passed in a transparent way via CSVs or other structured data, so... almost no command args

### Interactive tricks

page-able graphics with R console https://stat.ethz.ch/pipermail/r-help/2008-April/160722.html

args(function_name) to quick-recap a function (having read the docs before)

    
### Mapping values
    
always have a table, either as an input csv or defined in the program

merge on that table -- don't do if-else

if you're making a categorical variable in some more complicated way that demands an if-else structure, still save the resulting map 

### Reproducible research

develop and publish a package? maybe. sounds like overkill to me

knitr/rmarkdown seem promising, plus whatever that tool is that bundles/snapshots package versions

### Global options

stringsAsFactors = FALSE

(recent changes from r-devel news:)

-  When the condition ‘code’ in ‘if(.)’ or ‘while(.)’ is not of length one, an error instead of a warning may be triggered by setting an environment variable, see the help page.

## Performance

### Profiling

common sense takes you a long ways. i have never needed profiling -- just think carefully about your problem and notice when you're stepping into combinatorially costly operations.

options(datatable.verbose = TRUE)

debugonce()

(whatever else for profiling)

    
### Rcpp {#rcpp}
    
    it can speed up your code
    
    it is dead simple to read and write
    
    it is often be more elegant, e.g., because C++ has unordered sets as a basic data type http://stackoverflow.com/a/35559972 and also linked lists and such. all the nice stuff proper programming languages have
    
    R itself is written in C, as is the core functionality of data.table
    
    had's guide: http://adv-r.had.co.nz/Rcpp.html 
    
    
### Parallelization
    
    e.g., for bootstrapping. the cheap way is to use perl or r to write a script that calls the program many times

### Working with files on disk

yeah, this seems to be changing all the time

database interfacing and such, maybe you are tied to the DB and can't switch to R (no problem); maybe you can't fit the data in memory (start over from the beginning and rethink everything and/or learn AWS)
    
## Nontabular data    

### Graph theory

Don't reinvent the wheel. Use igraph if it fits

### Spatial data

?

maybe a good example: http://stackoverflow.com/q/13316185/



## Data packages

see "data sets" section https://cran.r-project.org/web/views/Econometrics.html

### APIs

(kind of surprised this doesn't have a task view)

BEA: package bea.R

### Just data

misc: 
  package noncensus
  package Ecdat
  package EconData (not on CRAN, https://github.com/floswald/EconData)


### Mixed with code

panel data econometrics: package plm
Achim Zeileis' 'metrics book: package AER

## Dynamic programming

i did it with data.table, but there may be more efficient approaches that rely only on matrices


## Asking questions online

not worth the bother to add this

if using random example data, use set.seed

test the example in a new session to make sure it runs on its own

built-in data sets

don't worry about making objects with the same names as built-ins (rivers, state.abb, etc)

use built-in data sets or simple hand-made examples

provide expected output

isolate the problem

if it's a performance question, write the example as a function of n and look at other good performance questions

try your code in a new R session to make sure it works as you described

if it's regex (it's usually regex), maybe don't post to SO, try chat


library(help="datasets") as here http://stackoverflow.com/a/8368263/

## Publishing

link back and forth with "reproducible research", under "style"

### Graphs

Ihaka on lattice https://www.stat.auckland.ac.nz/~ihaka/120/Lectures/lecture25.pdf 

### Docs


### Object Orientation

methods and such, Joshua Ulrich's community wiki post http://stackoverflow.com/questions/19226816/how-can-i-view-the-source-code-for-a-function/19226817#19226817


### Packages

browse r internals http://docs.rexamine.com/R-devel/index.html (hosted by stringi maintainer, out of date)

well-known copy, without the doc-like structure https://github.com/wch/r-source (linked earlier in the "functions" section)

official mirror, i guess https://svn.r-project.org/R/trunk/ 







